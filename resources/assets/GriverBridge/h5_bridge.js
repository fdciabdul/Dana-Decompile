var ucVersion;try{ucVersion=navigator.userAgent.match(/UCBS\/(\d+\.\d+)/)}catch(e){console.err(e)}var isUC=void 0!=ucVersion;console.log('inject h5_bridge with WebView: '+isUC);if(!isUC){console.log('try inject androidEmbedViewManager script in non WebView!');document.androidEmbedViewManager||function(){var e={parseObjectElement:function(e){var t,n;if(e.children)for(var a=e.children.length,o=0;o<a;o++){var i=e.children[o];'type'===i.getAttribute('name')?t=i.getAttribute('value'):'id'===i.getAttribute('name')&&(n=i.getAttribute('value'))}void 0===n&&(n=e.id);var l=e.getBoundingClientRect(),c=0;document.documentElement&&document.documentElement.scrollLeft?c=document.documentElement.scrollLeft:document.body&&(c=document.body.scrollLeft);var r=0;document.documentElement&&document.documentElement.scrollTop?r=document.documentElement.scrollTop:document.body&&(r=document.body.scrollTop);return{elementId:n,type:t,x:l.left+c,y:l.top+r,width:l.width,height:l.height}},render:function(e){var t=document.getElementById(e);if(t&&"OBJECT"===t.tagName){console.log('render '+e);return this.parseObjectElement(t)}}};document.androidEmbedViewManager=e}()}document.addNebulaDocumentFlag||function(){console.log("begin load JSBridge");var messenger=window.__alipayConsole__||window.console,log=messenger.log,e=function(e){log.call(messenger,"{bridge_token}h5container.message: "+JSON.stringify(e))},t=null,n=null;window.addEventListener("message",function(e){if(e&&"__RENDER_WORKER_IPC_MP__"===e.data&&null===n&&e.ports&&1===e.ports.length){(n=e.ports[0]).onmessage=function(e){try{var t=JSON.parse(e.data),n='postMessage'===t.handlerName?'message':t.handlerName;if(t.responseId){var o=a[t.responseId];'boolean'==typeof t.keepCallback&&t.keepCallback||delete a[t.responseId];'function'==typeof o&&setTimeout(function(){o(t.responseData)},0)}else n&&AlipayJSBridge.trigger(n,t,t.callbackId)}catch(t){log.call(messenger,"failed to process message: "+e.data);log.call(messenger,t)}};t=function(e){e.__FastPath__=1;var t=JSON.stringify(e);n.postMessage(t)}}});var a={};window.AlipayJSBridge={call:function(n,o,i){if('string'==typeof n){if('function'==typeof o){i=o;o=null}else'object'!=typeof o&&(o=null);var l=''+(new Date).getTime()+Math.random();'function'==typeof i&&(a[l]=i);var c={func:n,param:o,msgType:'call',clientId:l};'postMessage'===n&&null!==t?t(c):e(c)}},callback:function(n,a){var o={clientId:n,param:a};null!==t&&'string'==typeof n&&'native_'!==n.substring(0,7)?t(o):e(o)},trigger:function(e,t,n){if(e){var a=document.createEvent('Events');a.initEvent(e,!1,!0);a.syncJsApis=[];if('object'==typeof t)for(var o in t)a[o]=t[o];a.clientId=n;var i=!document.dispatchEvent(a);n&&'back'===e&&AlipayJSBridge.callback(n,{prevent:i});n&&'closeWindow'===e&&AlipayJSBridge.callback(n,{prevent:i});n&&'firePullToRefresh'===e&&AlipayJSBridge.callback(n,{prevent:i});n&&'onShare'===e&&AlipayJSBridge.callback(n,{prevent:i});n&&'collectDestroyJsApi'===e&&AlipayJSBridge.callback(n,{syncJsApis:a.syncJsApis});n&&'collectPerformanceBeforeDestroy'===e&&AlipayJSBridge.callback(n,{eventExtraData: a.eventExtraData});n&&'pullIntercept'===e&&AlipayJSBridge.callback(n,{prevent:i});n&&'segControlClick'===e&&AlipayJSBridge.callback(n,{prevent:i});n&&'promotionClose'===e&&AlipayJSBridge.callback(n,{prevent:i})}},_invokeJS:function(e){e=JSON.parse(e);console.log("invokeJS msgType "+e.msgType+" func "+e.func);if('callback'===e.msgType){var t=a[e.clientId];'boolean'==typeof e.keepCallback&&e.keepCallback||delete a[e.clientId];'function'==typeof t&&setTimeout(function(){t(e.param)},1)}else'call'===e.msgType&&e.func&&this.trigger(e.func,e.param,e.clientId)},devPerformance4Test:""};document.addNebulaDocumentFlag={};AlipayJSBridge.startupParams='{startupParams}';window.POSTMESSAGE_FAST='{POSTMESSAGE_FAST}';window.APVIEWID='{APVIEWID}';window.AlipayJSBridge.invoke=window.AlipayJSBridge.call;window.JSBridge=window.AlipayJSBridge;var o=document.createEvent('Events');o.initEvent('AlipayJSBridgeReady',!1,!1);var newReadyEvent=document.createEvent('Events');newReadyEvent.initEvent('JSBridgeReady', !1, !1);var i=document.addEventListener;document.addEventListener=function(e,t){e===o.type&&setTimeout(function(){t(o)},1);e===newReadyEvent.type&&setTimeout(function(){t(newReadyEvent)},1);i.apply(document,arguments)};document.dispatchEvent(o);document.dispatchEvent(newReadyEvent);console.log("load JSBridge dispatchEvent JSBridgeReady");}();
// do not modify